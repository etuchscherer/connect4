<!DOCTYPE html>
<html>
  <head>
    <title>Socket.IO chat</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>
      $(document).ready(function() {

        var socket = io();

        function cell(x,y) {
          return $('.row'+y+' :eq('+x+')').find('span.label');
        }

        socket.on('connect4', function(msg){
          for (var y = 0; y < 6; y++) {
            for (var x = 0; x < 7; x++) {
              cellSpan = cell(x,y).text(msg[y][x]);
            }
          }
        });

        $('a.coin-slot').click(function(e) {
          e.preventDefault();
          value = $(e.target).data('id');

          console.log('you clicked id:', value);

          socket.emit('connect4-move', {move: value});
        });

        $('a.send').click(function(e){
          e.preventDefault();
          socket.emit('connect4', 'foo');
          console.log('emiting message');
          socket.emit('chat message', $('#m').val());
          $('#m').val('');
          return false;
        });

        socket.on('chat message', function(msg){
          $('#messages').append($('<li>').text(msg));
        });
      });
    </script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="0">Column 0</a>
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="1">Column 1</a>
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="2">Column 2</a>
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="3">Column 3</a>
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="4">Column 4</a>
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="5">Column 5</a>
          <a href="#" class="coin-slot col-lg-1 btn btn-primary" data-id="6">Column 6</a>
      </div>

      <div class="row row0">
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
      </div>
      <div class="row row1">
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
      </div>
      <div class="row row2">
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
      </div>
      <div class="row row3">
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
      </div>
      <div class="row row4">
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
      </div>
      <div class="row row5">
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
        <div class="col-lg-1"><span class="label label-default">0</span></div>
      </div>

    </div>
    <ul id="messages"></ul>
    <div action="">
      <input id="m" autocomplete="off" />
      <a href="#" class="send">Send</a>
    </div>
  </body>
</html>
